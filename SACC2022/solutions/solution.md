# 剑术修行

当木块的长宽高至少有一个为偶数时，咕咕可以直接将木块切为大小相等的两块，答案为 0。

当木块的长宽高均为奇数时，咕咕将会选择最长的一条边的切开，答案为其余两边的乘积。

# 幻方游戏

记每行、每列以及两个斜对角线的三数之和为 $x$，那么九个格点之和恰为 $3x$。

记 $(2, 2)$ 的权值为 $c$。将经过 $(2,2)$ 的四条线叠加（$4x$），则除了 $(2,2)$ 被统计了四次，其他八点均被统计了一次，可以看作是统计了所有的九个格点一次（$3x$）并统计了 $(2,2)$ 三次（$3c$）。

即 $4x = 3x + 3c$，得到 $x = 3c$。

当我们知道 $x$ 恰为 $c$ 的三倍，这样我们稍加计算即可知道其他格点的数值了。

# 卡牌游戏

当 $n$ 为 $2$ 的整次幂时，白咕咕必输，否则白咕咕必胜。

必胜策略为：记当前卡牌数为 $k$，白咕咕每次取 $k$ 的二进制表示中最低位的 $1$ 所代表的数。

这样黑咕咕取牌必然无法一次取完，而白咕咕只需要重复策略，最后一定会使得 $k$ 的二进制表示中只剩一个 $1$，并被白咕咕取走。

而当 $n$ 为 $2$ 的整次幂时，白咕咕无法起手就取走所有的卡牌，这样无论白咕咕一次取多少数量的卡牌，黑咕咕只要重复白咕咕的策略即可获胜。

# 装载规划

容易发现是一道 01 背包题，但背包容量过大，无法直接解决。

发现商品价值不超过 $10^3$，令 $f[i]$ 表示装填价值为 $i$ 的物品的最小重量，换一种方式 DP 即可。

具体地，因为总价值 $\sum v \leq n \times \max \{n\} = 10^5$，我们对于每一个价值 $j$，枚举所有的物品 $i$，尝试更新 $f_j$ 即可。

时间复杂度 $\mathcal{O}(n \cdot n \cdot \max{v})$。

# 循环法阵

可以发现节点之间串联形成了一个个环。使用并查集或 DFS 可以统计出每个环的大小。

要统计所有排列种数，直接计算所有的环的大小的最小公倍数即可。而最后的结果可能很大，因此无法直接计算，需要进行优化。

具体地，我们首先求出每一个环的大小 $x_i$，然后对 $x_i$ 分解质因数，统计每一类质因数的出现次数的最大值即可。

# 镜像符串

将字符串 $s$ 反转后接在 $s$ 后面，即可使用 KMP 解决本题。

以字符串 `abac` 为例，反转并拼接后变为 `abac*caba`。对于前缀 `ab`，其与原串镜像对称的子串经过反转后，恰与原前缀相同。

我们只需要利用 $\pi$ 函数判断对于新串的每一个前缀，其右侧有多少串与其相同即可。

# 算术练习

容易想到，对于相同的一段数字串，采用的进制越低，值越小。

对于给定的数字串 $s$，我们能对其采用的最低的进制，即为 $s$ 中最大的数字加一。容易知道所有可能出现的进制为 $1$ 到 $10$。

只需要使用线段树来查询区间最值，即可知道我们需要采用哪一种进制。

然后我们使用十个树状数组/线段树来维护全部十种进制，每次进制更新时将十颗树全部更新，查询时只需要查询对应进制的树即可。

# 向听计算

**一般型**

对于单一花色、不考虑雀头，那么和牌型必然恰包含且只包含面子。

记 $m_i, s_i, p_i, z_i$（$0 \leq i \leq 4$）表示将给定的手牌中的指定花色变为 $i$ 副面子的最小代价（摸切次数）。

对于字牌，因为只有刻子，我们可以很轻松地计算出 $z_i$。

对于万索饼三种花色，我们可以预处理出单一花色的所有全面子的构成（大约 $3000$ 种），并将其与给定手牌比对，得到差值即可算出代价。

为了方便计算，我们还需要额外处理出 $m'_i, s'_i, p'_i, z'_i$ 表示将给定的手牌中的指定花色变为 $i$ 副面子和 $1$ 副雀头的最小代价。

这样最小代价即为：

$$
\min_{a+b+c+d=4}
\begin{cases}
m'_a + s_b + p_c + z_d \\
m_a + s'_b + p_c + z_d \\
m_a + s_b + p'_c + z_d \\
m_a + s_b + p_c + z'_d
\end{cases}
$$

**七对子型**

直接找到出现次数前七大的牌即可，以它们作为目标计算最后的代价。

**国士无双型**

首先找到所有的幺九牌的出现次数。

当所有的幺九牌出现次数都不超过 $1$ 次，那么目标即为所有幺九牌恰出现一次，以它作为目标计算最后的代价。

当有至少一种幺九牌（假设为 $x$）出现了 $2$ 次，那么目标即为 $x$ 出现两次，有一张幺九不出现，其他幺九恰出现一次，以它作为目标计算最后的代价。

